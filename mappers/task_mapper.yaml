
# 获取任务列表（支持分页和状态筛选）
get_task_list: >
  SELECT * FROM order_tasks 
  WHERE (%(status)s IS NULL OR status = %(status)s)
  LIMIT %(offset)s, %(limit)s

# 核心：根据票档价格和名称匹配任务
find_matched_tasks: >
  SELECT id, artist, customer_info, bounty, created_at 
  FROM order_tasks 
  WHERE status = 0 
    AND target_price = %(price)s 
    AND artist LIKE CONCAT('%', %(title)s, '%')
  ORDER BY bounty DESC

# 指派任务：更新任务关联的 SKU
assign_task_to_sku: >
  UPDATE order_tasks 
  SET sku_id = %(sku_id)s, updated_at = NOW() 
  WHERE id = %(task_id)s